  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       1

                   **********************************
                   *PROGRAMA DE EJEMPLO
                   **********************************

                   PACTL  EQU   $1026
                   PACNT  EQU   $1027
                   ADCTL  EQU   $1030
                   ADR1   EQU   $1031
                   ADR2   EQU   $1032
                   ADR3   EQU   $1033
                   ADR4   EQU   $1034
                   OPTION EQU   $1039

                   PORTA  EQU   $1000
                   PORTD  EQU   $1008
                   PORTE  EQU   $100A
                   PORTG  EQU   $1002

                   DDRA   EQU   $1001
                   DDRD   EQU   $1009
                   DDRG   EQU   $1003

                   TMSK2  EQU   $1024
                   TFLG2  EQU   $1025

                   SCDR   EQU   $102F
                   SCCR2  EQU   $102D
                   SCSR   EQU   $102E
                   SCCR1  EQU   $102C
                   BAUD   EQU   $102B
                   HPRIO  EQU   $103C
                   SPCR   EQU   $1028
                   CSCTL  EQU   $105D
                   OPT2   EQU   $1038

                   * VARIABLES *********************

                   ORDEN  EQU   $000C
                   SEG    EQU   $000D
                   U1     EQU   $000E
                   U2     EQU   $000F
                   U3     EQU   $0010
                   U4     EQU   $0011
                   U5     EQU   $0012
                   V1     EQU   $0013
                   V2     EQU   $0014
                   BAS_H  EQU   $0015
                   BAS_L  EQU   $0016
                   V5     EQU   $0017
                   TEMPO  EQU   $0018
                   ALTO   EQU   $0019
                   BAJO   EQU   $001A
                   BASE_H EQU   $001B
                   BASE_L EQU   $001C
                   V3     EQU   $001D
                   V4     EQU   $001E

                   **********************************
                   *CONFIGURA REGISTROS
                   **********************************
                          ORG   $8000   * DIR DE INICIO
  8000 8E 00 FF           LDS   #$00FF  * APUNTADOR DE STAK


  8003 86 00              LDAA  #$00    * CONFIG TODO EL PUERTO  A COMO ENTRADAS
  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       2

  8005 B7 10 01           STAA  DDRA    * EL PUERTO A

  8008 86 FF              LDAA  #$FF    * CONFIG TODO EL PUERTO  G COMO SALIDAS
  800A B7 10 03           STAA  DDRG    * EL PUERTO G

  800D 86 00              LDAA  #$00    * SE PONE PUERTO G EN CEROS
  800F B7 10 02           STAA  PORTG

  8012 CC 30 2C           LDD   #$302C  * CONFIGURA PUERTO SERIAL
  8015 B7 10 2B           STAA  BAUD    * BAUD  9600  para cristal de 8MHz
  8018 F7 10 2D           STAB  SCCR2   * HABILITA  RX Y TX PERO INTERRUPCN SOLO
.                  RX
  801B 86 00              LDAA  #$00
  801D B7 10 2C           STAA  SCCR1   * 8 BITS

  8020 86 FE              LDAA  #$FE    * CONFIG PUERTO D COMO SALIDAS (EXCEPTO
.                  PD0)
  8022 B7 10 09           STAA  DDRD    * SEA  ENABLE DEL DISPLAY  PD4  Y RS PD3


  8025 86 04              LDAA  #$04
  8027 B7 10 3C           STAA  HPRIO

  802A 86 00              LDAA  #$00
  802C 06                 TAP







                   **********************************
                   *PROGRAMA PRINCIPAL
                   **********************************
                   MAIN
  802D BD 80 C6           JSR    INICIA

  8030 7F 00 11    INICIO  CLR    U4
  8033 7F 00 10    NO_S1   CLR    U3
  8036 7F 00 0F    NO_S    CLR    U2
  8039 7F 00 0E            CLR    U1




                   OTRO
  803C 86 3F               LDAA    #'?
  803E 97 0C               STAA    ORDEN

                   CICLO
  8040 96 0C               LDAA    ORDEN
  8042 81 3F               CMPA    #'?
  8044 27 FA               BEQ     CICLO

  8046 D6 0E               LDAB    U1
  8048 26 09               BNE     CHECA_U2
  804A 81 73               CMPA    #'s
  804C 26 EE               BNE     OTRO
  804E 97 0E               STAA    U1
  8050 7E 80 3C            JMP     OTRO


                   CHECA_U2

  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       3

  8053 D6 0F               LDAB    U2
  8055 26 13               BNE     CHECA_U3
  8057 81 54               CMPA    #'T
  8059 27 0A               BEQ     ES_T
  805B 81 53               CMPA    #'S
  805D 27 DD               BEQ     OTRO
  805F 7F 00 0E            CLR     U1
  8062 7E 80 3C            JMP     OTRO
  8065 97 0F       ES_T    STAA    U2
  8067 7E 80 3C            JMP     OTRO

                   CHECA_U3

  806A D6 10               LDAB    U3
  806C 26 13               BNE     CHECA_U4
  806E 81 41               CMPA    #'A
  8070 27 0A               BEQ     ES_A
  8072 81 53               CMPA    #'S
  8074 26 C0               BNE     NO_S
  8076 7F 00 0F            CLR     U2
  8079 7E 80 3C            JMP     OTRO

                   ES_A

  807C 97 10               STAA    U3
  807E 7E 80 3C            JMP     OTRO

                   CHECA_U4

  8081 D6 11               LDAB    U4
  8083 26 16               BNE     CHECA_T
  8085 81 52               CMPA    #'R
  8087 27 0D               BEQ     ES_R
  8089 81 53               CMPA    #'S
  808B 26 A6               BNE     NO_S1
  808D 7F 00 10            CLR     U3
  8090 7F 00 0F            CLR     U2
  8093 7E 80 3C            JMP     OTRO

                   ES_R

  8096 97 11               STAA    U4
  8098 7E 80 3C            JMP     OTRO

                   CHECA_T

  809B 81 54               CMPA    #'T
  809D 27 10               BEQ     EXITO
  809F 81 53               CMPA    #'S
  80A1 26 8D               BNE     INICIO
  80A3 7F 00 11            CLR     U4
  80A6 7F 00 10            CLR     U3
  80A9 7F 00 0F            CLR     U2
  80AC 7E 80 3C            JMP     OTRO

                   EXITO
  80AF 86 45               LDAA  #'E
  80B1 97 19               STAA  ALTO
  80B3 86 58               LDAA  #'X
  80B5 97 1A               STAA  BAJO
  80B7 86 49               LDAA  #'I
  80B9 97 1B               STAA  BASE_H
  80BB 86 54               LDAA  #'T
  80BD 97 1C               STAA  BASE_L
  80BF 86 4F               LDAA  #'O
  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       4

  80C1 97 1D               STAA  V3

  80C3 7E 80 2D            JMP MAIN


                   ***********************************
                   * INICIA
                   ***********************************
                   INICIA

  80C6 7F 00 0D          CLR  SEG

  80C9 7F 10 02          CLR  PORTG
  80CC 86 F4             LDAA #$F4
  80CE 97 18             STAA TEMPO         * TEMPO ES VARIABLE PARA CONTAR 244
.                  CICLOS

  80D0 CE 10 24          LDX #TMSK2
  80D3 1C 00 40          BSET $00,X,#$40    * HABILITA INTERRUPCION TIMER T-REAL
  80D6 0E                CLI

  80D7 CE 10 26          LDX #PACTL
  80DA 1C 00 50          BSET $00,X,#$50    * HABILITA PAEN -ACUMULADOR PULSOS
.                  ALTOS-
  80DD 7F 10 27          CLR PACNT          * BORRA ACUMULADOR DE PULSOS

  80E0 86 10             LDAA #$10
  80E2 97 1B             STAA BASE_H        * PONE UN #1060 COMO DIRECCION BASE
.                  INICIAL
  80E4 86 60             LDAA #$60
  80E6 97 1C             STAA BASE_L

  80E8 18 CE 10 60       LDY  #$1060

  80EC 86 16             LDAA #$16
  80EE 97 15             STAA BAS_H        * PONE UN #1653 NUMERO TOTAL DE JUEGO
.                  DE MUESTRAS
  80F0 86 53             LDAA #$53
  80F2 97 16             STAA BAS_L


  80F4 7F 00 19          CLR  ALTO          * INICIA INDICE MUESTRA EN 0
  80F7 7F 00 1A          CLR  BAJO

  80FA 39                 RTS
                   ***********************************
                   * SACA
                   ***********************************
                   SACA


  80FB 96 19              LDAA  ALTO         * INDICE DE MUESTRA (SEGUNDO)
  80FD D6 1A              LDAB  BAJO
  80FF 18 8F              XGDY
  8101 18 08              INY
  8103 18 8F              XGDY
  8105 BD 82 41           JSR   BINBCD
  8108 BD 81 76           JSR   DISPLAY
  810B BD 81 66           JSR   COMA

  810E 96 1B              LDAA  BASE_H       * INDICE DE MUESTRA (PARTICULAR)
  8110 D6 1C              LDAB  BASE_L
  8112 18 8F              XGDY

  8114 18 08              INY
  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       5

  8116 4F                 CLRA
  8117 18 E6 00           LDAB  $00,Y
  811A BD 82 51           JSR   BNBCD
  811D BD 81 95           JSR   DSPLY
  8120 BD 81 66           JSR   COMA

  8123 18 08              INY
  8125 4F                 CLRA
  8126 18 E6 00           LDAB  $00,Y
  8129 BD 82 51           JSR   BNBCD
  812C BD 81 95           JSR   DSPLY
  812F BD 81 66           JSR   COMA

  8132 18 08              INY
  8134 4F                 CLRA
  8135 18 E6 00           LDAB  $00,Y
  8138 BD 82 51           JSR   BNBCD
  813B BD 81 95           JSR   DSPLY
  813E BD 81 66           JSR   COMA

  8141 18 08              INY
  8143 4F                 CLRA
  8144 18 E6 00           LDAB  $00,Y
  8147 BD 82 51           JSR   BNBCD
  814A BD 81 95           JSR   DSPLY
  814D BD 81 66           JSR   COMA

  8150 18 08              INY
  8152 4F                 CLRA
  8153 18 E6 00           LDAB  $00,Y
  8156 BD 82 51           JSR   BNBCD
  8159 BD 81 95           JSR   DSPLY

  815C 18 8F              XGDY
  815E 97 1B              STAA BASE_H
  8160 D7 1C              STAB BASE_L

  8162 BD 81 C3           JSR   CRYTRN

  8165 39                 RTS
                   ***********************************
                   * COMA
                   ***********************************
                   COMA
  8166 CE 10 2E           LDX   #SCSR

  8169 B6 10 2E           LDAA  SCSR
  816C 86 2C              LDAA  #$2C             * COMA
  816E B7 10 2F           STAA  SCDR
                   C1
  8171 1F 00 80 FC        BRCLR $00,X,#$80 C1
  8175 39                 RTS
                   ***********************************
                   * DESPLIEGA
                   ***********************************
                   DISPLAY

  8176 CE 10 2E           LDX   #SCSR

  8179 B6 10 2E           LDAA  SCSR
  817C 96 0E              LDAA  U1             * U1
  817E 8B 30              ADDA  #$30
  8180 B7 10 2F           STAA  SCDR
                   T1
  8183 1F 00 80 FC        BRCLR $00,X,#$80 T1
  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       6


  8187 B6 10 2E           LDAA  SCSR
  818A 96 0F              LDAA  U2             * U2
  818C 8B 30              ADDA  #$30
  818E B7 10 2F           STAA  SCDR
                   T2
  8191 1F 00 80 FC        BRCLR $00,X,#$80 T2

                   DSPLY
  8195 CE 10 2E           LDX   #SCSR

  8198 B6 10 2E           LDAA SCSR
  819B 96 10              LDAA  U3             * U3
  819D 8B 30              ADDA  #$30
  819F B7 10 2F           STAA  SCDR
                   T3
  81A2 1F 00 80 FC        BRCLR $00,X,#$80 T3

  81A6 B6 10 2E           LDAA SCSR
  81A9 96 11              LDAA  U4             * U4
  81AB 8B 30              ADDA  #$30
  81AD B7 10 2F           STAA  SCDR
                   T4
  81B0 1F 00 80 FC        BRCLR $00,X,#$80 T4

  81B4 B6 10 2E           LDAA SCSR
  81B7 96 12              LDAA  U5             * U5
  81B9 8B 30              ADDA  #$30
  81BB B7 10 2F           STAA  SCDR
                   T5
  81BE 1F 00 80 FC        BRCLR $00,X,#$80 T5

  81C2 39                 RTS

                   ***********************************
                   * CARRY RETURN
                   ***********************************

                   CRYTRN
  81C3 CE 10 2E           LDX   #SCSR
  81C6 B6 10 2E           LDAA  SCSR
  81C9 86 0A              LDAA  #$0A             * NEW LINE
  81CB B7 10 2F           STAA  SCDR
                   CR1
  81CE 1F 00 80 FC        BRCLR $00,X,#$80 CR1

  81D2 B6 10 2E           LDAA SCSR
  81D5 86 0D              LDAA #$0D              * CARRY RETURN
  81D7 B7 10 2F           STAA SCDR
                   CR2
  81DA 1F 00 80 FC        BRCLR $00,X,#$80 CR2

  81DE 39                 RTS
                   ***********************************
                   *  DESPLIEGUE DE DATO RECIBIDO
                   ***********************************

                   DATARX
  81DF CE 10 2E           LDX   #SCSR
  81E2 B6 10 2E           LDAA  SCSR
  81E5 96 0C              LDAA  ORDEN             * NEW LINE
  81E7 B7 10 2F           STAA  SCDR
                   DT1
  81EA 1F 00 80 FC        BRCLR $00,X,#$80 DT1

  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       7

  81EE B6 10 2E           LDAA SCSR
  81F1 86 3A              LDAA #$3A              * DOS PUNTOS
  81F3 B7 10 2F           STAA SCDR
                   DT2
  81F6 1F 00 80 FC        BRCLR $00,X,#$80 DT2

  81FA 39                 RTS
                   ***********************************
                   * voltimetro
                   ***********************************
                   VOLTA
  81FB CE 10 30          LDX #ADCTL

  81FE 86 80             LDAA #$80
  8200 B7 10 39          STAA OPTION        * PONE EN MARCHA EL ADC

  8203 86 10             LDAA #$10
  8205 B7 10 30          STAA ADCTL         * ENTRADA MULTIPLE SELECCIONA CANAL
.                  0

                   E1
  8208 1F 00 80 FC       BRCLR $00,X,#$80 E1
  820C F6 10 31          LDAB ADR1
  820F D7 13             STAB V1

  8211 86 80             LDAA #$80
  8213 B7 10 39          STAA OPTION        * PONE EN MARCHA EL ADC

  8216 86 11             LDAA #$11
  8218 B7 10 30          STAA ADCTL         * ENTRADA MULTIPLE SELECCIONA CANAL
.                  1

                   E2
  821B 1F 00 80 FC       BRCLR $00,X,#$80 E2
  821F F6 10 32          LDAB ADR2
  8222 D7 14             STAB V2

  8224 86 12             LDAA #$12
  8226 B7 10 30          STAA ADCTL         * ENTRADA MULTIPLE SELECCIONA CANAL
.                  2

                   E3
  8229 1F 00 80 FC       BRCLR $00,X,#$80 E3
  822D F6 10 33          LDAB ADR3
  8230 D7 1D             STAB V3

  8232 86 13             LDAA #$13
  8234 B7 10 30          STAA ADCTL         * ENTRADA MULTIPLE SELECCIONA CANAL
.                  3

                   E4
  8237 1F 00 80 FC       BRCLR $00,X,#$80 E4
  823B F6 10 34          LDAB ADR4
  823E D7 1E             STAB V4


  8240 39                RTS
                   ***********************************
                   * CONVIERTE A BCD
                   ***********************************

                   BINBCD

  8241 CE 27 10          LDX  #$2710
  8244 02                IDIV
  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       8

  8245 8F                XGDX
  8246 D7 0E             STAB U1
  8248 8F                XGDX
  8249 CE 03 E8          LDX  #$3E8
  824C 02                IDIV
  824D 8F                XGDX
  824E D7 0F             STAB U2
  8250 8F                XGDX

                   BNBCD
  8251 CE 00 64          LDX  #$64
  8254 02                IDIV
  8255 8F                XGDX
  8256 D7 10             STAB U3
  8258 8F                XGDX
  8259 CE 00 0A          LDX  #$A
  825C 02                IDIV
  825D 8F                XGDX
  825E D7 11             STAB U4
  8260 8F                XGDX
  8261 D7 12             STAB U5



  8263 39                RTS



                   ***********************************
                   * ATENCION A INTERRUPCION SERIAL
                   ***********************************
                          ORG  $F100

  F100 36                 PSHA

  F101 B6 10 2E           LDAA SCSR
  F104 B6 10 2F           LDAA SCDR
  F107 97 0C              STAA ORDEN

  F109 32                 PULA

  F10A 3B                 RTI

                   ***********************************
                   * ATENCION A INTERRUPCION REAL TIME
                   ***********************************
                         ORG  $F110

  F110 36                PSHA
  F111 3C                PSHX

  F112 CE 10 25          LDX #TFLG2
  F115 1C 00 40          BSET $00,X,#$40    * BORRA BANDERA INTERRUPCION
  F118 7A 00 18          DEC TEMPO
  F11B 27 03             BEQ SEGUNDO

  F11D 32                PULA
  F11E 38                PULX
  F11F 3B                RTI

                   SEGUNDO
  F120 86 FF             LDAA #$FF
  F122 97 0D             STAA SEG           * SEG ES UNA BANDERA DE SEGUNDO
  F124 86 F4             LDAA #$F4
  F126 97 18             STAA TEMPO         * TEMPO ES VARIABLE PARA CONTAR 244
  ADDR B1 B2 B3 B4 C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE       9

.                  CICLOS
  F128 7C 10 02          INC  PORTG

  F12B 32                PULA
  F12C 38                PULX
  F12D 3B                RTI
                   ***********************************
                   * VECTOR INTERRUPCION SERIAL
                   ***********************************
                          ORG   $FFD6
  FFD6 F1 00              FCB   $F1,$00

                   ***********************************
                   * VECTOR INTERRUPCION REAL TIME
                   ***********************************
                          ORG   $FFF0
  FFF0 F1 10              FCB   $F1,$10

                   ***********************************
                   *RESET
                   ***********************************
                          ORG    $FFFE
  FFFE 80 00       RESET  FCB    $80,$00
                   ***********************************
                          END   $8000

  Symbol Table 

  U2                 000F
  U3                 0010
  VOLTA              81FB
  BASE_L             001C
  U4                 0011
  U5                 0012
  V1                 0013
  V2                 0014
  V3                 001D
  V4                 001E
  CHECA_T            809B
  V5                 0017
  OPTION             1039
  E1                 8208
  E2                 821B
  E3                 8229
  E4                 8237
  SACA               80FB
  NO_S1              8033
  CR1                81CE
  SEGUNDO            F120
  CR2                81DA
  CSCTL              105D
  PACTL              1026
  TMSK2              1024
  SCCR1              102C
  SCCR2              102D
  BAUD               102B
  BNBCD              8251
  CICLO              8040
  ADCTL              1030
  CRYTRN             81C3
  TFLG2              1025
  MAIN               802D
  OPT2               1038
  ALTO               0019
  NO_S               8036
  Symbol Table     C:\Users\chris\Documentos SSD\Proyectos Python\  PAGE      10

  EXITO              80AF
  BINBCD             8241
  RESET              FFFE
  SEG                000D
  ORDEN              000C
  DT1                81EA
  DT2                81F6
  HPRIO              103C
  CHECA_U2           8053
  CHECA_U3           806A
  CHECA_U4           8081
  ES_A               807C
  COMA               8166
  OTRO               803C
  SCSR               102E
  ES_R               8096
  ES_T               8065
  BAJO               001A
  ADR1               1031
  ADR2               1032
  ADR3               1033
  ADR4               1034
  PORTA              1000
  PORTD              1008
  PORTE              100A
  PORTG              1002
  DDRA               1001
  DSPLY              8195
  DDRD               1009
  DATARX             81DF
  DDRG               1003
  SCDR               102F
  DISPLAY            8176
  PACNT              1027
  INICIA             80C6
  T1                 8183
  SPCR               1028
  T2                 8191
  T3                 81A2
  T4                 81B0
  BAS_H              0015
  T5                 81BE
  BAS_L              0016
  INICIO             8030
  C1                 8171
  BASE_H             001B
  TEMPO              0018
  U1                 000E
